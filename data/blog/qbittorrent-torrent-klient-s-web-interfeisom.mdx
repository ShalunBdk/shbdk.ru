---
title: 'qBittorrent - торрент клиент с web-интерфесом'
date: '2024-07-10'
lastmod: '2025-02-23'
tags: ['docker', 'homelab', 'qbittorrent']
summary: 'Запуск qBittorrent с использованием Docker'
images: ['/static/images/blog/qb/banner.png']
authors: ['default']
---

[qBittorrent](https://github.com/qbittorrent/qBittorrent) — один из лучших торрент-клиентов, известный своей легкостью и многофункциональностью.

Благодаря наличию собственного веб-интерфейса qBittorrent NOX является отличным торрент-клиентом для работы в контейнере Docker.

## Установка Docker

**Обновляем пакеты**

```bash
apt update && apt upgrade -y
```

**Устанавливаем docker**

```bash
bash <(curl -sSL https://get.docker.com)
```

**Добавляем текущего пользователя в группу `docker`**

```bash
sudo usermod -aG docker ${USER}
```

После выполнения команды выйдите из системы и войдите снова, чтобы изменения вступили в силу. Или используйте команду:

```bash
newgrp docker
```

## Запуск QBittorrent

Для запуска qBittorrent через Docker, вы можете использовать [официальный образ ](https://hub.docker.com/r/qbittorrentofficial/qbittorrent-nox) или [образ от linuxserver](https://hub.docker.com/r/linuxserver/qbittorrent). Оба варианта популярны и хорошо поддерживаются.

**Какой выбрать?**

- **Официальный образ**, если:
  - Вам нужен минималистичный образ без лишних настроек.
  - Вы хотите использовать образ, поддерживаемый разработчиками qBittorrent.
  - Вам не нужны дополнительные функции, такие как автоматическая настройка PUID/PGID.
- **Образ от linuxserver**, если:
  - Вам нужен удобный и предварительно настроенный образ.
  - Вы хотите использовать дополнительные функции, такие как PUID/PGID и TZ.
  - Вам важна подробная документация и поддержка сообщества.

> [!note]
> Оба образа отлично подходят для запуска qBittorrent в Docker. Если вы новичок или хотите больше удобства, выбирайте **linuxserver**. Если вы предпочитаете минимализм и официальную поддержку, выбирайте **официальный образ**.

Я выбираю образ от linuxserver, так как он более удобен.

Создаем файл `docker-compose` со следующим содержимым

```yaml:docker-compose.yml
---
services:
  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest
    container_name: qbittorrent
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Moscow
      - WEBUI_PORT=8181
      - TORRENTING_PORT=6881
    volumes:
      - ./config:/config  # Конфигурационные файлы
      - /mnt/shared/downloads:/downloads  # Папка для загрузок
    ports:
      - 8181:8181
      - 6881:6881
      - 6881:6881/udp
    restart: unless-stopped
```

**Небольшое пояснение того, что делает каждая строка:**

- `TZ`: Установка временной зоны. Вы можете найти допустимое значение для этой строки, просмотрев [список часовых поясов базы данных tz в Википедии](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) . Пример допустимого значения здесь — `Europe/Moscow`.
- `WEBUI_PORT`: Порт веб-интерфейса.
- `PUID=1000`: Идентификатор пользователя, от которого будет запущен контейнер.
- `PGID=1000`: Идентификатор группы, от которой будет запущен контейнер.
- `8080:8080`: Проброс порта веб-интерфейса на хост.
- `6881:6881`: Проброс порта для входящих соединений.
- `6881:6881/udp`: Проброс UDP порта для входящих соединений.
- `./config:/config`: Тома для хранения конфигурации.
- `/mnt/shared/downloads:/downloads`: Тома для хранения загруженных файлов.

> [!note]
> Чтобы узнать `PUID` и `PGID` текущего пользователя введите команду `id` в терминале.

**Запускаем контейнер**

Теперь, мы можем запустить контейнер qBittorrent с помощью следующей команды в терминале.

```bash
docker compose up
```

> [!warning]
> Мы не используем здесь опцию `-d`, поскольку не хотим, чтобы Docker отсоединялся от терминала. Это нужно для того, чтоб получить временный пароль, который qBittorrent генерирует при запуске.

После запуска контейнера qBittorrent в терминале должен появиться следующий текст.

```
qbittorrent-nox  | Веб-интерфейс скоро запустится после внутренней подготовки. Пожалуйста, подождите…
qbittorrent-nox  |
qbittorrent-nox  | ******** Информация ********
qbittorrent-nox  | Войдите в веб-интерфейс для управления qBittorrent: http://localhost:8181
qbittorrent-nox  |
qbittorrent-nox  | Имя администратора веб-интерфейса: admin
qbittorrent-nox  | Пароль администратора веб-интерфейса не был установлен. Для этого сеанса представлен временный пароль: NnvS96u8K
qbittorrent-nox  | Необходимо задать собственный пароль в настройках программы.
```

Запишите временный пароль, так как он понадобится вам для первого доступа к веб-интерфейсу.

После того как скопировали временный пароль, открываем Web интерфейс по адресу `http://YOUR-IP:8181` и вводим имя пользователя по умолчанию `admin`, а пароль — тот, который был сгенерирован и показан в терминале ранее.

![qbittorrent](/static/images/blog/qb/qb.png)

После первого входа в qBittorrent необходимо установить пароль, в противном случае ваш Docker-контейнер будет генерировать новый пароль при каждом запуске.

Чтобы начать установку пароля, нажмите на значок шестеренки на панели задач. Открыв страницу настроек, вам нужно будет перейти на вкладку `Веб-интерфейс`. Находясь на вкладке `Веб-интерфейс`, прокрутите страницу вниз, пока не увидите заголовок `Аутентификация`, здесь вы можете сменить сразу имя пользователя и пароль. Для применения изменений нажмите кнопку сохранить.

![qbittorrent_setting](/static/images/blog/qb/qb_setting.png)

Если по какой- то причине вы забыли пароль от веб-интерфейса, то откройте config файл в любом текстовом редакторе, например

```bash
sudo nano ~/qb/config/qBittorrent/config/qBittorrent.conf
```

Найдите строку `WebUI\Password_PBKDF2` и полностью удалите ее.

**Запуск qBittorent в фоновом режиме**

Установив пароль для учетной записи администратора, вы можете остановить запуск контейнера в своем терминале. Чтобы остановить контейнер, нажмите `CTRL+C` при открытом терминале.

Теперь мы можем снова запустить qBittorrent, но на этот раз с помощью опции `-d`.

```bash
docker compose up -d
```

**Обновление Docker-контейнера qBittorrent**

Одним из преимуществ запуска qBittorrent через контейнер Docker является то, что обновление программного обеспечения сводится к выполнению нескольких команд.

К концу следующих шагов у вас будет установлена ​​последняя версия.

1. Чтобы обновить наш Docker-контейнер qBittorrent, нам необходимо перейти в каталог, в который мы записали файл docker-compose.yml

2. Как только мы окажемся в нужном каталоге, мы можем приказать Docker загрузить последнюю версию контейнера qBittorrent.

```bash
docker compose pull
```

3. Несмотря на то, что мы загрузили новую версию контейнера, Docker начнет использовать ее только в том случае, если мы дадим ему команду начать работу заново.

При запуске стека Compose Docker обнаружит новую версию контейнера qBittorrent и перейдет к ней.

```bash
docker compose up -d
```

## Заключение

Мы получили торрент клиент, которым можем пользоваться как в локальной сети так и за ее пределами.
Вы можете освободить свой рабочий ПК от скачивания торрентов, а так же запустить загрузку торрента находясь вне дома, чтобы по приходу домой не загружать канал и не тратить время на ожидание скачивания торрента.
Так же при использовании Nextcloud вы можете получить доступ к скачанным файлам, если к примеру в месте где вы находитесь, доступ к торрентам ограничен.

> [!tip]
> Для удобства использования qBittorrent на мобильных устройствах существуют мобильное приложение [qBittorrent Remote Lite](https://play.google.com/store/apps/details?id=me.fengmlo.qbRemoteFree&hl=ru)
